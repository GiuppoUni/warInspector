<!DOCTYPE html>
<html>

<head>
    <meta charset="=utf-8">

    <!-- <<<<< Imports -->


    <script src="http://d3js.org/topojson.v1.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link rel="stylesheet" href="static/bootstrap4.5/css/bootstrap.min.css" crossorigin="anonymouse" />

    <script src="https://cdn.jsdelivr.net/npm/evil-icons@1.9.0/assets/evil-icons.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/evil-icons@1.9.0/assets/evil-icons.min.css">
    <link rel="stylesheet" href="static/css/style.css">

    <title> Weapons </title>
    <script src="static/js/Main.js"></script>

    <script src="https://d3js.org/d3.v4.min.js" charset="utf-8"></script>
    <script src="static/js/libraries/d3-simple-slider.min.js"></script>
    <script src="static/js/libraries/d3-legend.js"></script>
    <script src="static/js/MapComponentsManager.js"></script>



</head>


<body>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>

    <div class="pos-f-t">

        <nav class="navbar fixed-top navbar-dark bg-dark">
            <button type="button" onclick="toggler()" id="hamburger" class=" btn btn-dark navbar-toggler " type="button" data-toggle="offcanvas" data-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent" aria-expanded="false" aria-label="Toggle navigation">
                <i class="fa fa-bars" style="color: aliceblue;" aria-hidden="true"> Menu</i>
                
            </button>
            <a class="navbar-brand" href="#"></a>


            <div class="row" style="float:left;   margin-left: auto;
            margin-right: auto;">

                <img src="static/icons/valogo.png" width="50" style="" />
                <h4 style="    margin-left: 15px;color: aliceblue;">WarInspector</h4>
            </div>

            <div class="row" style="float: right;margin-right: 10px;">
                <!-- <img width="30px" src="static/icons/search.png" /> -->

                <div data-icon="ei-search" data-size="m" style="    margin-left: 100px;"></div>
                <select id="selectNation" class="selectpicker" data-width="800px" multiple data-live-search="true" data-size="4" data-actions-box="true" title="Choose one or more country..." onchange="clickedNation()">
                <option value=ZYY>ğŸ³  (multiple sellers)</option><option value=AFG>ğŸ‡¦ğŸ‡«  Afghanistan</option><option value=ALB>ğŸ‡¦ğŸ‡±  Albania</option><option value=DZA>ğŸ‡©ğŸ‡¿  Algeria</option><option value=ASM>ğŸ‡¦ğŸ‡¸  American Samoa</option><option value=AND>ğŸ‡¦ğŸ‡©  Andorra</option><option value=AGO>ğŸ‡¦ğŸ‡´  Angola</option><option value=AIA>ğŸ‡¦ğŸ‡®  Anguilla</option><option value=ATG>ğŸ‡¦ğŸ‡¬  Antigua & Barbuda</option><option value=ARG>ğŸ‡¦ğŸ‡·  Argentina</option><option value=ARM>ğŸ‡¦ğŸ‡²  Armenia</option><option value=ABW>ğŸ‡¦ğŸ‡¼  Aruba</option><option value=AUS>ğŸ‡¦ğŸ‡º  Australia</option><option value=AUT>ğŸ‡¦ğŸ‡¹  Austria</option><option value=AZE>ğŸ‡¦ğŸ‡¿  Azerbaijan</option><option value=BHS>ğŸ‡§ğŸ‡¸  Bahamas</option><option value=BHR>ğŸ‡§ğŸ‡­  Bahrain</option><option value=BGD>ğŸ‡§ğŸ‡©  Bangladesh</option><option value=BRB>ğŸ‡§ğŸ‡§  Barbados</option><option value=BLR>ğŸ‡§ğŸ‡¾  Belarus</option><option value=BEL>ğŸ‡§ğŸ‡ª  Belgium</option><option value=BLZ>ğŸ‡§ğŸ‡¿  Belize</option><option value=BEN>ğŸ‡§ğŸ‡¯  Benin</option><option value=BMU>ğŸ‡§ğŸ‡²  Bermuda</option><option value=BTN>ğŸ‡§ğŸ‡¹  Bhutan</option><option value=BTN>ğŸ‡§ğŸ‡¹  Bhutan</option><option value=BOL>ğŸ‡§ğŸ‡´  Bolivia</option><option value=BIH>ğŸ‡§ğŸ‡¦  Bosnia-Herzegovina</option><option value=BWA>ğŸ‡§ğŸ‡¼  Botswana</option><option value=BRA>ğŸ‡§ğŸ‡·  Brazil</option><option value=BRN>ğŸ‡§ğŸ‡³  Brunei</option><option value=BGR>ğŸ‡§ğŸ‡¬  Bulgaria</option><option value=BFA>ğŸ‡§ğŸ‡«  Burkina Faso</option><option value=BDI>ğŸ‡§ğŸ‡®  Burundi</option><option value=KHM>ğŸ‡°ğŸ‡­  Cambodia</option><option value=CMR>ğŸ‡¨ğŸ‡²  Cameroon</option><option value=CAN>ğŸ‡¨ğŸ‡¦  Canada</option><option value=ZKK>ğŸ‡®ğŸ‡¨  Canary Islands</option><option value=CPV>ğŸ‡¨ğŸ‡»  Cape Verde</option><option value=CYM>ğŸ‡°ğŸ‡¾  Cayman Islands</option><option value=CAF>ğŸ‡¨ğŸ‡«  Central African Republic</option><option value=TCD>ğŸ‡¹ğŸ‡©  Chad</option><option value=CHL>ğŸ‡¨ğŸ‡±  Chile</option><option value=CHN>ğŸ‡¨ğŸ‡³  China</option><option value=CXR>ğŸ‡¨ğŸ‡½  Christmas Island</option><option value=COL>ğŸ‡¨ğŸ‡´  Colombia</option><option value=COM>ğŸ‡°ğŸ‡²  Comoros</option><option value=COK>ğŸ‡¨ğŸ‡°  Cook Islands</option><option value=CRI>ğŸ‡¨ğŸ‡·  Costa Rica</option><option value=HRV>ğŸ‡­ğŸ‡·  Croatia</option><option value=CUB>ğŸ‡¨ğŸ‡º  Cuba</option><option value=CYP>ğŸ‡¨ğŸ‡¾  Cyprus</option><option value=CZE>ğŸ‡¨ğŸ‡¿  Czechia</option><option value=COD>ğŸ‡¨ğŸ‡©  Democratic Republic Of Congo</option><option value=DNK>ğŸ‡©ğŸ‡°  Denmark</option><option value=DJI>ğŸ‡©ğŸ‡¯  Djibouti</option><option value=DMA>ğŸ‡©ğŸ‡²  Dominica</option><option value=DMA>ğŸ‡©ğŸ‡´  Dominican Republic</option><option value=DOM>ğŸ‡©ğŸ‡´ <option value=DMA>ğŸ‡©ğŸ‡´  Dominican Republic</option></option><option value=TLS>ğŸ‡¹ğŸ‡±  East Timor</option><option value=ECU>ğŸ‡ªğŸ‡¨  Ecuador</option><option value=EGY>ğŸ‡ªğŸ‡¬  Egypt</option><option value=GBR>ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿  England</option><option value=GIN>ğŸ‡¬ğŸ‡¶  Equatorial Guinea</option><option value=GNQ>ğŸ‡¬ğŸ‡¶ <option value=GIN>ğŸ‡¬ğŸ‡¶  Equatorial Guinea</option></option><option value=ERI>ğŸ‡ªğŸ‡·  Eritrea</option><option value=EST>ğŸ‡ªğŸ‡ª  Estonia</option><option value=ETH>ğŸ‡ªğŸ‡¹  Ethiopia</option><option value=ZZZ>ğŸ³  Europe multi-state</option><option value=ZZZ>ğŸ‡ªğŸ‡º  European Union</option><option value=GBR>ğŸ‡«ğŸ‡°  Falkland Islands</option><option value=FRO>ğŸ‡«ğŸ‡´  Faroe Islands</option><option value=FJI>ğŸ‡«ğŸ‡¯  Fiji</option><option value=FIN>ğŸ‡«ğŸ‡®  Finland</option><option value=FRA>ğŸ‡«ğŸ‡·  France</option><option value=PYF>ğŸ‡µğŸ‡«  French Polynesia</option><option value=GAB>ğŸ‡¬ğŸ‡¦  Gabon</option><option value=GMB>ğŸ‡¬ğŸ‡²  Gambia</option><option value=GEO>ğŸ‡¬ğŸ‡ª  Georgia</option><option value=DEU>ğŸ‡©ğŸ‡ª  Germany</option><option value=GHA>ğŸ‡¬ğŸ‡­  Ghana</option><option value=GIB>ğŸ‡¬ğŸ‡®  Gibraltar</option><option value=GRC>ğŸ‡¬ğŸ‡·  Greece</option><option value=GRL>ğŸ‡¬ğŸ‡±  Greenland</option><option value=GRD>ğŸ‡¬ğŸ‡©  Grenada</option><option value=GUM>ğŸ‡¬ğŸ‡º  Guam</option><option value=GTM>ğŸ‡¬ğŸ‡¹  Guatemala</option><option value=GGY>ğŸ‡¬ğŸ‡¬  Guernsey</option><option value=GIN>ğŸ‡¬ğŸ‡³  Guinea</option><option value=GUY>ğŸ‡¬ğŸ‡¾  Guyana</option><option value=HTI>ğŸ‡­ğŸ‡¹  Haiti</option><option value=USA>ğŸ‡ºğŸ‡¸  Hawaii</option><option value=HND>ğŸ‡­ğŸ‡³  Honduras</option><option value=HKG>ğŸ‡­ğŸ‡°  Hong Kong</option><option value=HUN>ğŸ‡­ğŸ‡º  Hungary</option><option value=ISL>ğŸ‡®ğŸ‡¸  Iceland</option><option value=IND>ğŸ‡®ğŸ‡³  India</option><option value=IDN>ğŸ‡®ğŸ‡©  Indonesia</option><option value=IRN>ğŸ‡®ğŸ‡·  Iran</option><option value=IRQ>ğŸ‡®ğŸ‡¶  Iraq</option><option value=IRL>ğŸ‡®ğŸ‡ª  Ireland</option><option value=IMN>ğŸ‡®ğŸ‡²  Isle of Man</option><option value=ISR>ğŸ‡®ğŸ‡±  Israel</option><option value=ITA>ğŸ‡®ğŸ‡¹  Italy</option><option value=JAM>ğŸ‡¯ğŸ‡²  Jamaica</option><option value=JPN>ğŸ‡¯ğŸ‡µ  Japan</option><option value=JEY>ğŸ‡¯ğŸ‡ª  Jersey</option><option value=JOR>ğŸ‡¯ğŸ‡´  Jordan</option><option value=KAZ>ğŸ‡°ğŸ‡¿  Kazakhstan</option><option value=KEN>ğŸ‡°ğŸ‡ª  Kenya</option><option value=KIR>ğŸ‡°ğŸ‡®  Kiribati</option><option value=XKX>ğŸ‡½ğŸ‡°  Kosovo</option><option value=KWT>ğŸ‡°ğŸ‡¼  Kuwait</option><option value=KGZ>ğŸ‡°ğŸ‡¬  Kyrgyzstan</option><option value=LAO>ğŸ‡±ğŸ‡¦  Laos</option><option value=LVA>ğŸ‡±ğŸ‡»  Latvia</option><option value=LBN>ğŸ‡±ğŸ‡§  Lebanon</option><option value=LSO>ğŸ‡±ğŸ‡¸  Lesotho</option><option value=LBR>ğŸ‡±ğŸ‡·  Liberia</option><option value=LBY>ğŸ‡±ğŸ‡¾  Libya</option><option value=LIE>ğŸ‡±ğŸ‡®  Liechtenstein</option><option value=LTU>ğŸ‡±ğŸ‡¹  Lithuania</option><option value=LUX>ğŸ‡±ğŸ‡º  Luxembourg</option><option value=MDG>ğŸ‡²ğŸ‡¬  Madagascar</option><option value=MWI>ğŸ‡²ğŸ‡¼  Malawi</option><option value=MYS>ğŸ‡²ğŸ‡¾  Malaysia</option><option value=MDV>ğŸ‡²ğŸ‡»  Maldives</option><option value=MLI>ğŸ‡²ğŸ‡±  Mali</option><option value=MLT>ğŸ‡²ğŸ‡¹  Malta</option><option value=MTQ>ğŸ‡²ğŸ‡¶  Martinique</option><option value=MRT>ğŸ‡²ğŸ‡·  Mauritania</option><option value=MUS>ğŸ‡²ğŸ‡º  Mauritius</option><option value=MEX>ğŸ‡²ğŸ‡½  Mexico</option><option value=FSM>ğŸ‡«ğŸ‡²  Micronesia</option><option value=MDA>ğŸ‡²ğŸ‡©  Moldova</option><option value=MCO>ğŸ‡²ğŸ‡¨  Monaco</option><option value=MNG>ğŸ‡²ğŸ‡³  Mongolia</option><option value=MNE>ğŸ‡²ğŸ‡ª  Montenegro</option><option value=MSR>ğŸ‡²ğŸ‡¸  Montserrat</option><option value=MAR>ğŸ‡²ğŸ‡¦  Morocco</option><option value=MOZ>ğŸ‡²ğŸ‡¿  Mozambique</option><option value=NAM>ğŸ‡³ğŸ‡¦  Namibia</option><option value=NAT>ğŸ³  Nato</option><option value=NRU>ğŸ‡³ğŸ‡·  Nauru</option><option value=NPL>ğŸ‡³ğŸ‡µ  Nepal</option><option value=NLD>ğŸ‡³ğŸ‡±  Netherlands</option><option value=NZL>ğŸ‡³ğŸ‡¿  New Zealand</option><option value=NIC>ğŸ‡³ğŸ‡®  Nicaragua</option><option value=NER>ğŸ‡³ğŸ‡ª  Niger</option><option value=NER>ğŸ‡³ğŸ‡¬  Nigeria</option><option value=NGA>ğŸ‡³ğŸ‡¬ <option value=NER>ğŸ‡³ğŸ‡¬  Nigeria</option></option><option value=NIU>ğŸ‡³ğŸ‡º  Niue</option><option value=NFK>ğŸ‡³ğŸ‡«  Norfolk Island</option><option value=PRK>ğŸ‡°ğŸ‡µ  North Korea</option><option value=NOR>ğŸ‡³ğŸ‡´  Norway</option><option value=OMN>ğŸ‡´ğŸ‡²  Oman</option><option value=PAK>ğŸ‡µğŸ‡°  Pakistan</option><option value=PLW>ğŸ‡µğŸ‡¼  Palau</option><option value=PSE>ğŸ³  Palestine</option><option value=PAN>ğŸ‡µğŸ‡¦  Panama</option><option value=GIN>ğŸ‡µğŸ‡¬  Papua New Guinea</option><option value=PNG>ğŸ‡µğŸ‡¬ <option value=GIN>ğŸ‡µğŸ‡¬  Papua New Guinea</option></option><option value=PRY>ğŸ‡µğŸ‡¾  Paraguay</option><option value=PER>ğŸ‡µğŸ‡ª  Peru</option><option value=PHL>ğŸ‡µğŸ‡­  Philippines</option><option value=PCN>ğŸ‡µğŸ‡³  Pitcairn Islands</option><option value=POL>ğŸ‡µğŸ‡±  Poland</option><option value=POL>ğŸ‡µğŸ‡±  Poland</option><option value=PRT>ğŸ‡µğŸ‡¹  Portugal</option><option value=PRI>ğŸ‡µğŸ‡·  Puerto Rico</option><option value=QAT>ğŸ‡¶ğŸ‡¦  Qatar</option><option value=COD>ğŸ‡¨ğŸ‡¬  Republic Of Congo</option><option value=ROU>ğŸ‡·ğŸ‡´  Romania</option><option value=RUS>ğŸ‡·ğŸ‡º  Russia</option><option value=RWA>ğŸ‡·ğŸ‡¼  Rwanda</option><option value=SLV>ğŸ‡¸ğŸ‡»  El Salvador</option><option value=SLV>ğŸ‡¸ğŸ‡»  El Salvador</option><option value=WSM>ğŸ‡¼ğŸ‡¸  Samoa</option><option value=SMR>ğŸ‡¸ğŸ‡²  San Marino</option><option value=SAU>ğŸ‡¸ğŸ‡¦  Saudi Arabia</option><option value=GBR>ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿  Scotland</option><option value=SEN>ğŸ‡¸ğŸ‡³  Senegal</option><option value=SRB>ğŸ‡·ğŸ‡¸  Serbia</option><option value=SYC>ğŸ‡¸ğŸ‡¨  Seychelles</option><option value=SLE>ğŸ‡¸ğŸ‡±  Sierra Leone</option><option value=SGP>ğŸ‡¸ğŸ‡¬  Singapore</option><option value=ZKY>ğŸ‡¸ğŸ‡½  Sint Maarten</option><option value=SVK>ğŸ‡¸ğŸ‡°  Slovakia</option><option value=SVN>ğŸ‡¸ğŸ‡®  Slovenia</option><option value=SLB>ğŸ‡¸ğŸ‡§  Solomon Islands</option><option value=SOM>ğŸ‡¸ğŸ‡´  Somalia</option><option value=SOM>ğŸ³  Somaliland</option><option value=ZAF>ğŸ‡¿ğŸ‡¦  South Africa</option><option value=KOR>ğŸ‡°ğŸ‡·  South Korea</option><option value=SDN>ğŸ‡¸ğŸ‡¸  South Sudan</option><option value=SDN>ğŸ‡¸ğŸ‡¸ <option value=SDN>ğŸ‡¸ğŸ‡¸  South Sudan</option></option><option value=ESP>ğŸ‡ªğŸ‡¸  Spain</option><option value=LKA>ğŸ‡±ğŸ‡°  Sri Lanka</option><option value=SDN>ğŸ‡¸ğŸ‡©  Sudan</option><option value=code3>ğŸ‡¸ğŸ‡·  Suriname</option><option value=SUR>ğŸ‡¸ğŸ‡· <option value=code3>ğŸ‡¸ğŸ‡·  Suriname</option></option><option value=SWZ>ğŸ‡¸ğŸ‡¿  Swaziland</option><option value=SWE>ğŸ‡¸ğŸ‡ª  Sweden</option><option value=CHE>ğŸ‡¨ğŸ‡­  Switzerland</option><option value=SYR>ğŸ‡¸ğŸ‡¾  Syria</option><option value=TWN>ğŸ‡¹ğŸ‡¼  Taiwan</option><option value=TJK>ğŸ‡¹ğŸ‡¯  Tajikistan</option><option value=TZA>ğŸ‡¹ğŸ‡¿  Tanzania</option><option value=THA>ğŸ‡¹ğŸ‡­  Thailand</option><option value=CHN>ğŸ³  Tibet</option><option value=TGO>ğŸ‡¹ğŸ‡¬  Togo</option><option value=TKL>ğŸ‡¹ğŸ‡°  Tokelau</option><option value=TON>ğŸ‡¹ğŸ‡´  Tonga</option><option value=TTO>ğŸ‡¹ğŸ‡¹  Trinidad & Tobago</option><option value=TUN>ğŸ‡¹ğŸ‡³  Tunisia</option><option value=TUR>ğŸ‡¹ğŸ‡·  Turkey</option><option value=TKM>ğŸ‡¹ğŸ‡²  Turkmenistan</option><option value=TCA>ğŸ‡¹ğŸ‡¨  Turks And Caicos Islands</option><option value=TUV>ğŸ‡¹ğŸ‡»  Tuvalu</option><option value=ARE>ğŸ‡¦ğŸ‡ª  United Arab Emirates</option><option value=ARE>ğŸ‡¦ğŸ‡ª  United Arab Emirates</option><option value=UGA>ğŸ‡ºğŸ‡¬  Uganda</option><option value=UKR>ğŸ‡ºğŸ‡¦  Ukraine</option><option value=GBR>ğŸ‡¬ğŸ‡§  United Kingdom</option><option value=ONU>ğŸ‡ºğŸ‡³  United Nations</option><option value=USA>ğŸ‡ºğŸ‡¸  United States</option><option value=ZXX>ğŸ³  Unknown supplier(s)</option><option value=URY>ğŸ‡ºğŸ‡¾  Uruguay</option><option value=UZB>ğŸ‡ºğŸ‡¿  Uzbekistan</option><option value=VUT>ğŸ‡»ğŸ‡º  Vanuatu</option><option value=VAT>ğŸ‡»ğŸ‡¦  Vatican City</option><option value=VEN>ğŸ‡»ğŸ‡ª  Venezuela</option><option value=VNM>ğŸ‡»ğŸ‡³  Vietnam</option><option value=GBR>ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿  Wales</option><option value=ESH>ğŸ‡ªğŸ‡­  Western Sahara</option><option value=YEM>ğŸ‡¾ğŸ‡ª  Yemen</option><option value=ZMB>ğŸ‡¿ğŸ‡²  Zambia</option><option value=ZWE>ğŸ‡¿ğŸ‡¼  Zimbabwe</option>                
            </select>

            </div>

        </nav>
    </div>


    <!-- CODE HERE -->
    <div id="map_slider" class="row" style="width: 100%; height:100%; margin: 0 auto; background-color: black;"></div>
    <div id="slider-range"></div>

    <!-- Create a div where the graph will take place -->
    <script src="/static/js/libraries/d3-tip.js"></script>

    <div class="card bg-dark text-center" style="color:aliceblue">
        <div class="card-header   d-flex align-items-center justify-content-center  text-center">
            Weapons requests by category
        </div>
        <div class="card-body" id="my_dataviz"></div>
    </div>

    <div class="card bg-dark text-center" style="color:aliceblue">
        <div class="card-header d-flex align-items-center justify-content-center  text-center">
            Weapons by model
        </div>
        <div class="card-body" id="scatter_viz"></div>
    </div>


    <script>
        NUM_CATEGORIES = 20

        // set the dimensions and margins of the graph
        var margin = {
                top: 10,
                right: 30,
                bottom: 150,
                left: 100
            },
            width = 1800 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom;



        // append the svg object to the body of the page
        var svg = d3.select("#my_dataviz")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform",
                "translate(" + margin.left + "," + margin.top + ")");

        // Parse the Data
        d3.csv("static/data/merged.csv", function(data) {
                console.log(data)
                orderedWeapons = d3.nest()
                    .key(function(d) {
                        return d["Weapon category"];
                    })
                    .rollup(function(v) {
                        return d3.sum(v, function(d) {
                            return d.Ordered;
                        })

                    })
                    .entries(data)
                    .sort(function(a, b) {
                        return b.value - a.value;
                    })
                    .slice(0, NUM_CATEGORIES)

                console.log(JSON.stringify(orderedWeapons));

                // X axis
                var x = d3.scaleBand()
                    .range([0, width])
                    .domain(orderedWeapons.map(function(d) {
                        return d.key;
                    }))
                    .padding(0.2);
                svg.append("g")
                    .attr("class", "wtext")

                .attr("transform", "translate(0," + height + ")")
                    .call(d3.axisBottom(x))
                    .selectAll("text")
                    .attr("transform", "translate(-10,0)rotate(-45)")
                    .style("text-anchor", "end")

                var imageTip = d3.tip()
                    .attr('class', 'd3-tip')
                    .offset([-10, 0])
                    .html(function(d) {

                        return '<img alt="weapon img" src="static/icons/categories/' + d + '.jpeg" width="70" height="70" />';
                    })

                svg.call(imageTip);


                d3.selectAll(".tick")
                    .on('mouseover', function(d) {
                        console.log(this)
                        d3.select(this).style("font-size", "20px")
                        d3.select(this).select('g > text').style("fill", "rgba(17,222,222,1)");;
                        imageTip.show(d)
                    })
                    .on('mouseout', function(d) {
                        d3.select(this).style("font-size", "14px")
                        d3.select(this).select('g > text').style("fill", "white");;

                        imageTip.hide(d)
                    })
                    .on("click", function() {
                        alert("click")
                    })
                var tip = d3.tip()
                    .attr('class', 'd3-tip')
                    .offset([-10, 0])
                    .html(function(d) {
                        return "<strong>Ordered:</strong> <span style='color:red'>" + d.value + "</span>";
                    })


                svg.call(tip);



                // Add Y axis
                var y = d3.scaleLinear()
                    .domain([0, 80000])
                    .range([height, 0]);
                svg.append("g")
                    .call(d3.axisLeft(y));

                // Bars
                svg.selectAll("mybar")
                    .data(orderedWeapons)
                    .enter()
                    .append("rect")
                    .attr("x", function(d) {
                        return x(d.key);
                    })
                    .attr("width", x.bandwidth())
                    .attr("fill", "#69b3a2")
                    // no bar at the beginning thus:
                    .attr("height", function(d) {
                        return height - y(0);
                    }) // always equal to 0
                    .attr("y", function(d) {
                        return y(0);
                    })
                    .on('mouseover', tip.show)
                    .on('mouseout', tip.hide)

                // Animation
                svg.selectAll("rect")
                    .transition()
                    .duration(800)
                    .attr("y", function(d) {

                        return !isNaN(d.value) ? y(d.value) : 0;
                    })
                    .attr("height", function(d) {
                        return !isNaN(d.value) ? height - y(d.value) : height;
                    })
                    .delay(function(d, i) {
                        // console.log(i);
                        return (i * 100)
                    })

            })
            /***********
             * SCATTER *
             ***********/

        function drawScatter() {
            // set the dimensions and margins of the graph
            var margin = {
                    top: 10,
                    right: 30,
                    bottom: 30,
                    left: 60
                },
                width = 460 - margin.left - margin.right,
                height = 400 - margin.top - margin.bottom;
            // append the svg object to the body of the page
            var svg = d3.select("#scatter_viz")
                .append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform",
                    "translate(" + margin.left + "," + margin.top + ")")

            //Read the data
            d3.csv("https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/2_TwoNum.csv", function(data) {

                // Add X axis
                var x = d3.scaleLinear()
                    .domain([0, 0])
                    .range([0, width]);
                svg.append("g")
                    .attr("class", "myXaxis") // Note that here we give a class to the X axis, to be able to call it later and modify it
                    .attr("transform", "translate(0," + height + ")")
                    .call(d3.axisBottom(x))
                    .attr("opacity", "0")

                // Add Y axis
                var y = d3.scaleLinear()
                    .domain([0, 500000])
                    .range([height, 0]);
                svg.append("g")
                    .call(d3.axisLeft(y));

                // Add dots
                svg.append('g')
                    .selectAll("dot")
                    .data(data)
                    .enter()
                    .append("circle")
                    .attr("cx", function(d) {
                        return x(d.GrLivArea);
                    })
                    .attr("cy", function(d) {
                        return y(d.SalePrice);
                    })
                    .attr("r", 1.5)
                    .style("fill", "#69b3a2")

                // new X axis
                x.domain([0, 4000])
                svg.select(".myXaxis")
                    .transition()
                    .duration(2000)
                    .attr("opacity", "1")
                    .call(d3.axisBottom(x));

                svg.selectAll("circle")
                    .transition()
                    .delay(function(d, i) {
                        return (i * 3)
                    })
                    .duration(2000)
                    .attr("cx", function(d) {
                        return x(d.GrLivArea);
                    })
                    .attr("cy", function(d) {
                        return y(d.SalePrice);
                    })
            })
        }
        drawScatter()
    </script>

    <!--  -->
    <!-- DATA PICKER -->
    <!--  -->

    <link href="https://adminlte.io/themes/AdminLTE/bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css" rel="stylesheet" />

    <script src="https://adminlte.io/themes/AdminLTE/bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>


    <!-- END CODE -->
    <footer id="sticky-footer" class=" bg-dark text-white-50">
        <div class="container text-center">
            <small>Source: Sipri (www.sipri.org) and Data WorldBank (www.data.worldbank.org)</small><br/>
            <small>Copyright &copy; WarInspector</small> </div>
    </footer>


    <!------ Include the above in your HEAD tag ---------->

    <div id="wrapper">
        <div class="overlay"></div>

        <!-- Sidebar -->
        <nav class="navbar fixed-top navbar-dark bg-dark" id="sidebar-wrapper" role="navigation">
            <ul class="nav sidebar-nav">
                <li class="sidebar-brand">
                    <a href="#">
                           Brand
                        </a>
                </li>
                <li>
                    <a href="/">Home</a>
                </li>

                <li style="background-color: #79aefe;">
                    <a href="/weapons ">Weapons</a>
                </li>
                <li>
                    <a href="/countries ">Countries info</a>
                </li>

                <li>
                    <a href="/about ">About</a>
                </li>
                <li>
                    <a href="https://github.com/GiuppoUni/global-military-trade-visual ">Github</a>
                </li>
            </ul>
        </nav>
        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->

        <!-- /#page-content-wrapper -->

    </div>
</body>


</html>